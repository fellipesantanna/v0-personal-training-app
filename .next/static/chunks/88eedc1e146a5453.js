(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91918,e=>{"use strict";var t=e.i(71645);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var r=e.i(43476),s=t.forwardRef((e,i)=>{let{children:s,...n}=e,l=t.Children.toArray(s),d=l.find(o);if(d){let e=d.props.children,s=l.map(i=>i!==d?i:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(a,{...n,ref:i,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,r.jsx)(a,{...n,ref:i,children:s})});s.displayName="Slot";var a=t.forwardRef((e,r)=>{let{children:s,...a}=e;if(t.isValidElement(s)){var n;let e,o,l=(n=s,(o=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref);return t.cloneElement(s,{...function(e,t){let i={...t};for(let r in t){let s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?i[r]=(...e)=>{a(...e),s(...e)}:s&&(i[r]=s):"style"===r?i[r]={...s,...a}:"className"===r&&(i[r]=[s,a].filter(Boolean).join(" "))}return{...e,...i}}(a,s.props),ref:r?function(...e){return t=>{let r=!1,s=e.map(e=>{let s=i(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():i(e[t],null)}}}}(r,l):l})}return t.Children.count(s)>1?t.Children.only(null):null});a.displayName="SlotClone";var n=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});function o(e){return t.isValidElement(e)&&e.type===n}e.s(["Slot",()=>s],91918)},69035,e=>{"use strict";var t=e.i(43476),i=e.i(71645);e.i(74080);var r=e.i(91918),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,s)=>{let a=i.forwardRef((e,i)=>{let{asChild:a,...n}=e,o=a?r.Slot:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(o,{...n,ref:i})});return a.displayName=`Primitive.${s}`,{...e,[s]:a}},{}),a="horizontal",n=["horizontal","vertical"],o=i.forwardRef((e,i)=>{var r;let{decorative:o,orientation:l=a,...d}=e,c=(r=l,n.includes(r))?l:a;return(0,t.jsx)(s.div,{"data-orientation":c,...o?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:i})});o.displayName="Separator";var l=e.i(47163);function d({className:e,orientation:i="horizontal",decorative:r=!0,...s}){return(0,t.jsx)(o,{"data-slot":"separator",decorative:r,orientation:i,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}e.s(["Separator",()=>d],69035)},39144,e=>{"use strict";var t=e.i(17927);function i(e){return{id:e.id,routineId:e.routine_id,routineName:e.routine_name??"",startedAt:e.started_at?new Date(e.started_at):new Date,finishedAt:e.finished_at?new Date(e.finished_at):new Date,exercises:(e.session_exercises??[]).map(e=>({id:e.id,exerciseId:e.exercise_id,exerciseName:e.exercise_name??"Exercício",category:e.category??"weight-reps",position:e.position??0,sets:(e.sets??[]).map(e=>({id:e.id,setIndex:e.set_index,reps:e.reps??null,weightKg:e.weight_kg??null,durationSec:e.duration_sec??null,distanceM:e.distance_m??null}))}))}}e.s(["sessionsApi",0,{async getAll(){let{data:e,error:r}=await t.supabase.from("sessions").select(`
        id,
        routine_id,
        started_at,
        finished_at,
        session_exercises (
          id,
          exercise_id,
          sets (
            id,
            set_index,
            reps,
            weight_kg,
            duration_sec,
            distance_m
          )
        )
      `).order("started_at",{ascending:!1});if(r)throw r;return e.map(i)},async getById(e){let{data:r,error:s}=await t.supabase.from("sessions").select(`
        id,
        routine_id,
        started_at,
        finished_at,
        session_exercises (
          id,
          exercise_id,
          sets (
            id,
            set_index,
            reps,
            weight_kg,
            duration_sec,
            distance_m
          )
        )
      `).eq("id",e).single();if(s)throw s;return i(r)},async create(e){let{data:i}=await t.supabase.auth.getUser(),r=i?.user?.id;if(!r)throw Error("Usuário não autenticado");let{data:s,error:a}=await t.supabase.from("sessions").insert({user_id:r,routine_id:e.routineId,started_at:e.startedAt,finished_at:e.finishedAt}).select("*").single();if(a)throw a;for(let i of e.exercises){let{data:e,error:r}=await t.supabase.from("session_exercises").insert({session_id:s.id,exercise_id:i.exerciseId}).select("*").single();if(r)throw r;if(i.sets.length>0){let r=i.sets.map((t,i)=>({session_exercise_id:e.id,set_index:i,reps:t.reps??null,weight_kg:t.weightKg??null,duration_sec:t.durationSec??null,distance_m:t.distanceM??null})),{error:s}=await t.supabase.from("sets").insert(r);if(s)throw s}}return this.getById(s.id)}}],39144)},59043,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(39144),s=e.i(78481),a=e.i(75254);let n=(0,a.default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),o=(0,a.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var l=e.i(12475),d=e.i(18566),c=e.i(69035);function u(){let[e,a]=(0,i.useState)([]),[u,f]=(0,i.useState)(!0),p=(0,d.useRouter)();async function m(){f(!0);try{await r.sessionsApi.getAll();let e=await r.sessionsApi.getAll();a(e)}finally{f(!1)}}(0,i.useEffect)(()=>{m()},[]);let h={};for(let t of e){let e=(function(e){let t=new Date(e),i=t.getDay();return t.setDate(t.getDate()+((0===i?-6:1)-i)),t.setHours(0,0,0,0),t})(t.startedAt).toISOString().slice(0,10);h[e]||(h[e]=[]),h[e].push(t)}let x=Object.keys(h).sort((e,t)=>e<t?1:-1);return u?(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[70vh]",children:(0,t.jsx)("div",{className:"animate-spin w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full"})}):(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.25},className:"max-w-3xl mx-auto p-6 flex flex-col gap-10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-1",children:"Histórico"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Veja seus treinos organizados por semana"})]}),(0,t.jsx)(c.Separator,{}),x.map(e=>{var i;let r,a=((r=new Date(i=new Date(e))).setDate(r.getDate()+6),`${i.toLocaleDateString("pt-BR",{day:"2-digit",month:"long"})} — ${r.toLocaleDateString("pt-BR",{day:"2-digit",month:"long"})}`),d=h[e];return(0,t.jsxs)(s.motion.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col gap-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:a}),(0,t.jsx)("div",{className:"flex flex-col gap-4",children:d.map(e=>{let i=Math.round((e.finishedAt.getTime()-e.startedAt.getTime())/6e4);return(0,t.jsxs)(s.motion.div,{whileHover:{scale:1.02},transition:{duration:.15},onClick:()=>p.push(`/historico/${e.id}`),className:"   cursor-pointer rounded-xl border bg-card shadow-sm    p-4 flex items-center justify-between   hover:bg-muted/40 transition   ",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-12 w-12 flex items-center justify-center rounded-lg bg-purple-100 dark:bg-purple-900/40",children:(0,t.jsx)(l.Dumbbell,{className:"w-6 h-6 text-purple-700 dark:text-purple-300"})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-semibold text-lg",children:e.routineName}),(0,t.jsxs)("span",{className:"text-muted-foreground text-sm",children:[e.startedAt.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})," • ",e.exercises.length," exercícios"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),i," min"]}),(0,t.jsx)(n,{className:"w-5 h-5 text-muted-foreground"})]})]},e.id)})}),(0,t.jsx)(c.Separator,{})]},e)})]})}e.s(["default",()=>u],59043)}]);