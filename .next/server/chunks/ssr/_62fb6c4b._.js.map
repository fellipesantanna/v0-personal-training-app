{"version":3,"sources":["../../../../lib/api/exercise.ts","../../../../lib/mappers/exercise.ts","../../../../app/exercicios/page.tsx"],"sourcesContent":["import { supabase } from \"@/lib/supabase\";\r\nimport { mapDbExercise, toDbExercisePayload } from \"@/lib/mappers/exercise\";\r\n\r\nexport const exercisesApi = {\r\n  async getAll() {\r\n    const { data, error } = await supabase\r\n      .from(\"exercises\")\r\n      .select(\"*\")\r\n      .order(\"name\", { ascending: true });\r\n\r\n    if (error) throw error;\r\n    return data.map(mapDbExercise);\r\n  },\r\n\r\n  async getById(id: string) {\r\n    const { data, error } = await supabase\r\n      .from(\"exercises\")\r\n      .select(\"*\")\r\n      .eq(\"id\", id)\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return mapDbExercise(data);\r\n  },\r\n\r\n  async create(dto: any, userId: string) {\r\n    const payload = toDbExercisePayload({ ...dto, userId });\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"exercises\")\r\n      .insert(payload)\r\n      .select()\r\n      .single();\r\n\r\n    if (error) throw error;\r\n    return mapDbExercise(data);\r\n  },\r\n\r\n  async delete(id: string) {\r\n    const { error } = await supabase\r\n      .from(\"exercises\")\r\n      .delete()\r\n      .eq(\"id\", id);\r\n\r\n    if (error) throw error;\r\n    return true;\r\n  }\r\n};\r\n","import { Exercise } from \"@/lib/types\";\r\n\r\nexport function mapDbExercise(row: any): Exercise {\r\n  return {\r\n    id: row.id,\r\n    name: row.name,\r\n    category: row.category,\r\n    createdAt: new Date(row.created_at),\r\n    userId: row.user_id,\r\n\r\n    suggestedReps: row.suggested_reps,\r\n    suggestedWeight: row.suggested_weight,\r\n    suggestedTime: row.suggested_time,\r\n    suggestedDistance: row.suggested_distance\r\n  };\r\n}\r\n\r\nexport function toDbExercisePayload(ex: Partial<Exercise>) {\r\n  return {\r\n    name: ex.name,\r\n    category: ex.category,\r\n    user_id: ex.userId,\r\n\r\n    suggested_reps: ex.suggestedReps ?? null,\r\n    suggested_weight: ex.suggestedWeight ?? null,\r\n    suggested_time: ex.suggestedTime ?? null,\r\n    suggested_distance: ex.suggestedDistance ?? null,\r\n  };\r\n}\r\n","\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { exercisesApi } from \"@/lib/api/exercise\"\r\nimport { Exercise } from \"@/lib/types\"\r\nimport { supabase } from \"@/lib/supabase\"\r\n\r\nexport default function ExercisesPage() {\r\n\r\n  const [list, setList] = useState<Exercise[]>([])\r\n\r\n  const [name, setName] = useState(\"\")\r\n  const [category, setCategory] = useState(\"weight-reps\")\r\n\r\n  // SUGESTÕES\r\n  const [reps, setReps] = useState<number | null>(null)\r\n  const [weight, setWeight] = useState<number | null>(null)\r\n  const [time, setTime] = useState<number | null>(null)\r\n  const [distance, setDistance] = useState<number | null>(null)\r\n\r\n  async function load() {\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n    const data = await exercisesApi.getAll()\r\n    setList(data)\r\n  }\r\n\r\n  useEffect(() => {\r\n    load()\r\n  }, [])\r\n\r\n  async function create() {\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    await exercisesApi.create({\r\n      name,\r\n      category,\r\n      suggestedReps: reps,\r\n      suggestedWeight: weight,\r\n      suggestedTime: time,\r\n      suggestedDistance: distance,\r\n      userId: user!.id\r\n    }),\r\n\r\n    setName(\"\")\r\n    setReps(null)\r\n    setWeight(null)\r\n    setTime(null)\r\n    setDistance(null)\r\n\r\n    await load()\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h1>Exercícios</h1>\r\n\r\n      <div>\r\n        <input\r\n          placeholder=\"Nome do exercício\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n\r\n        <select value={category} onChange={(e) => setCategory(e.target.value)}>\r\n          <option value=\"weight-reps\">Peso + Reps</option>\r\n          <option value=\"bodyweight-reps\">Bodyweight</option>\r\n          <option value=\"duration\">Duração</option>\r\n          <option value=\"distance-duration\">Distância + Tempo</option>\r\n        </select>\r\n\r\n        {/* Campos dinâmicos */}\r\n        {category === \"weight-reps\" && (\r\n          <>\r\n            <input type=\"number\" placeholder=\"Reps sugeridas\" onChange={(e) => setReps(Number(e.target.value))} />\r\n            <input type=\"number\" placeholder=\"Peso sugerido (kg)\" onChange={(e) => setWeight(Number(e.target.value))} />\r\n          </>\r\n        )}\r\n\r\n        {category === \"bodyweight-reps\" && (\r\n          <input type=\"number\" placeholder=\"Reps sugeridas\" onChange={(e) => setReps(Number(e.target.value))} />\r\n        )}\r\n\r\n        {category === \"duration\" && (\r\n          <input type=\"number\" placeholder=\"Tempo sugerido (seg) \" onChange={(e) => setTime(Number(e.target.value))} />\r\n        )}\r\n\r\n        {category === \"distance-duration\" && (\r\n          <>\r\n            <input type=\"number\" placeholder=\"Distância sugerida (km)\" onChange={(e) => setDistance(Number(e.target.value))} />\r\n            <input type=\"number\" placeholder=\"Tempo sugerido (min)\" onChange={(e) => setTime(Number(e.target.value))} />\r\n          </>\r\n        )}\r\n\r\n        <button onClick={create}>Adicionar</button>\r\n      </div>\r\n\r\n      <ul>\r\n        {list.map((e) => (\r\n          <li key={e.id}>\r\n            {e.name} — {e.category}\r\n            <button onClick={() => exercisesApi.delete(e.id).then(load)}>apagar</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}